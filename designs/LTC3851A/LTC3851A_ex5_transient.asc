Version 4
SHEET 1 4336 2676
WIRE 1776 640 1168 640
WIRE 1168 720 1168 640
WIRE 1216 720 1168 720
WIRE 1296 720 1216 720
WIRE 1888 720 1744 720
WIRE 2096 720 1888 720
WIRE 2192 720 2096 720
WIRE 2304 720 2192 720
WIRE 1216 736 1216 720
WIRE 1888 736 1888 720
WIRE 2304 752 2304 720
WIRE 2096 768 2096 720
WIRE 1216 816 1216 800
WIRE 1840 816 1744 816
WIRE 2096 864 2096 832
WIRE 2304 864 2304 832
WIRE 1168 912 1168 720
WIRE 1296 912 1168 912
WIRE 1776 912 1776 704
WIRE 1776 912 1744 912
WIRE 1808 912 1776 912
WIRE 1888 912 1888 832
WIRE 1888 912 1872 912
WIRE 1888 1008 1888 912
WIRE 1888 1008 1744 1008
WIRE 1952 1008 1888 1008
WIRE 2112 1008 1952 1008
WIRE 2160 1008 2112 1008
WIRE 2288 1008 2240 1008
WIRE 2400 1008 2288 1008
WIRE 2480 1008 2400 1008
WIRE 2560 1008 2480 1008
WIRE 2736 1008 2560 1008
WIRE 2960 1008 2736 1008
WIRE 3152 1008 2960 1008
WIRE 1888 1024 1888 1008
WIRE 2560 1040 2560 1008
WIRE 2736 1040 2736 1008
WIRE 2960 1040 2960 1008
WIRE 3152 1040 3152 1008
WIRE 2400 1088 2400 1008
WIRE 1136 1104 1088 1104
WIRE 1232 1104 1200 1104
WIRE 1296 1104 1232 1104
WIRE 1840 1104 1744 1104
WIRE 1888 1136 1888 1120
WIRE 2560 1136 2560 1104
WIRE 2736 1136 2736 1104
WIRE 2960 1152 2960 1120
WIRE 3152 1152 3152 1120
WIRE 1136 1200 1088 1200
WIRE 1296 1200 1216 1200
WIRE 1792 1200 1744 1200
WIRE 2400 1200 2400 1168
WIRE 2400 1200 1792 1200
WIRE 2400 1232 2400 1200
WIRE 1056 1296 928 1296
WIRE 1184 1296 1056 1296
WIRE 1296 1296 1184 1296
WIRE 1792 1296 1744 1296
WIRE 1920 1296 1792 1296
WIRE 2016 1296 1920 1296
WIRE 2112 1296 2112 1008
WIRE 2112 1296 2096 1296
WIRE 1056 1312 1056 1296
WIRE 1792 1312 1792 1296
WIRE 2400 1344 2400 1312
WIRE 928 1360 928 1296
WIRE 1056 1392 1056 1376
WIRE 1296 1392 1264 1392
WIRE 1792 1392 1792 1376
WIRE 1792 1392 1744 1392
WIRE 1920 1392 1920 1376
WIRE 1920 1392 1792 1392
WIRE 2288 1392 2288 1008
WIRE 2288 1392 1920 1392
WIRE 928 1488 928 1424
WIRE 1056 1488 1056 1472
FLAG 1056 1488 0
FLAG 2960 1152 0
FLAG 2736 1136 0
FLAG 2304 864 0
FLAG 1184 1296 COMP
FLAG 928 1488 0
FLAG 3152 1152 0
FLAG 2400 1344 0
FLAG 2096 864 0
FLAG 2192 720 IN
FLAG 2480 1008 OUT
FLAG 1264 1392 0
FLAG 1888 1136 0
FLAG 1216 816 0
FLAG 1088 1104 0
FLAG 1088 1200 0
FLAG 1232 1104 SS
FLAG 1792 1200 FB
FLAG 1952 1008 SW
FLAG 2560 1136 0
SYMBOL RES 1040 1376 R0
WINDOW 0 51 41 Left 2
WINDOW 3 44 67 Left 2
SYMATTR InstName R1
SYMATTR Value {R1}
SYMBOL res 2384 1072 R0
WINDOW 0 46 38 Left 2
WINDOW 3 38 68 Left 2
SYMATTR InstName Ra
SYMATTR Value {Ra}
SYMBOL cap 1040 1312 R0
WINDOW 0 45 22 Left 2
WINDOW 3 39 52 Left 2
SYMATTR InstName C1
SYMATTR Value {C1}
SYMBOL polcap 2720 1040 R0
WINDOW 0 59 2 Left 2
WINDOW 3 53 33 Left 2
WINDOW 39 49 64 Left 2
SYMATTR InstName Cout
SYMATTR Value {Cout}
SYMATTR SpiceLine Rser={Resr}
SYMBOL VOLTAGE 2304 736 R0
WINDOW 0 41 35 Left 2
WINDOW 3 40 64 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 40 96 Left 2
SYMATTR InstName Vin
SYMATTR Value {Vin}
SYMATTR SpiceLine Rser=10m
SYMBOL ind 2144 1024 R270
WINDOW 0 102 57 VTop 2
WINDOW 3 98 58 VBottom 2
WINDOW 39 65 58 VBottom 2
SYMATTR InstName L
SYMATTR Value {L}
SYMATTR SpiceLine Rser={Rdcr}
SYMBOL res 2944 1024 R0
WINDOW 0 50 35 Left 2
WINDOW 3 46 66 Left 2
SYMATTR InstName Rload
SYMATTR Value {Rload}
SYMBOL cap 912 1360 R0
WINDOW 0 49 19 Left 2
WINDOW 3 41 50 Left 2
SYMATTR InstName C2
SYMATTR Value {C2}
SYMBOL current 3152 1040 R0
WINDOW 3 -439 191 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 0 45 16 Left 2
SYMATTR Value PWL(0 0 2.0m 0 2.001m {Istep} 2.4m {Istep} 2.401m 0)
SYMATTR InstName Istep
SYMBOL res 2384 1216 R0
WINDOW 0 48 33 Left 2
WINDOW 3 41 61 Left 2
SYMATTR InstName Rb
SYMATTR Value {Rb}
SYMBOL polcap 2080 768 R0
WINDOW 0 52 6 Left 2
WINDOW 3 51 30 Left 2
WINDOW 39 52 55 Left 2
SYMATTR InstName Cin
SYMATTR Value 40
SYMATTR SpiceLine Rser=10m
SYMBOL nmos 1840 736 R0
SYMATTR InstName Q1
SYMATTR Value RJK0305DPB
SYMBOL cap 1808 928 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C4
SYMATTR Value .1
SYMBOL cap 1200 736 R0
SYMATTR InstName C3
SYMATTR Value 4.7
SYMBOL cap 1200 1088 R90
WINDOW 0 -33 31 VBottom 2
WINDOW 3 -31 31 VTop 2
SYMATTR InstName Css
SYMATTR Value 2n
SYMBOL schottky 1760 640 R0
WINDOW 3 52 43 Left 2
WINDOW 0 53 17 Left 2
SYMATTR Value CMDSH2-3
SYMATTR InstName D1
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL nmos 1840 1024 R0
WINDOW 3 52 77 Left 2
SYMATTR Value RJK0301DPB
SYMATTR InstName Q2
SYMBOL res 2112 1280 R90
WINDOW 0 -33 56 VBottom 2
WINDOW 3 -33 56 VTop 2
SYMATTR InstName Rs
SYMATTR Value {Rs}
SYMBOL cap 1776 1312 R0
WINDOW 3 37 43 Left 2
WINDOW 39 24 85 Left 2
WINDOW 0 47 19 Left 2
SYMATTR Value {Cs}
SYMATTR InstName Cs
SYMBOL PowerProducts\\LTC3851A 1520 1056 R0
SYMATTR InstName U2
SYMBOL res 1904 1280 R0
WINDOW 0 49 50 Left 2
WINDOW 3 40 76 Left 2
SYMATTR InstName Ratten
SYMATTR Value {Ratten}
SYMBOL res 1232 1184 R90
WINDOW 0 -28 57 VBottom 2
WINDOW 3 -28 56 VTop 2
SYMATTR InstName Rfreq
SYMATTR Value 60k
SYMBOL cap 2544 1040 R0
WINDOW 3 50 31 Left 2
WINDOW 0 48 3 Left 2
SYMATTR Value 100
SYMATTR InstName Cout2
SYMATTR SpiceLine V=6.3 Irms=0 Rser=0.002 Lser=0 mfg="TDK" pn="C575OX5ROJI07M" type="X5R"
TEXT 2128 -80 Left 2 !.param\n+ Vin = 12\n+ Vout = 1.5\n+ Iout = 15\n+ Irload = 1     ; Resistive load current\n+ Istep = (Iout-Irload)   ; Load step\n+ Rload = (Vout/Irload)\n+ L = 0.47u  ; IHLP-3232DZ-01\n+ Rdcr = 2.6m\n+ Vref = 0.8\n+ Ra = 1.65k\n+ Rb = 1.87k\n+ R1 = 7.15k\n+ C1 = 2700p ; Ex#5 use 560p, Ex#6 use 2700p\n+ C2 = 180p\n+ Cout = 660u ; 2 x 2R5TPE330M9 (POSCAP)\n+ Resr = 4.5m\n+ As = 0.577  ;  As =  0.577 or 0.769 for Rsns = 1.5 or 2.0mOhm\n+ Cs = 100n   ; Rs and Ratten will be kOhm values\n+ Rs = L/(Rdcr*Cs*As)\n+ Ratten = Rs*As/(1-As)
TEXT 2864 -128 Left 3 ;Analysis:
TEXT 2872 112 Left 2 !;.tran 0 2.7m startup
TEXT 2872 80 Left 2 ;Transient response from time = 0
TEXT 2872 168 Left 2 ;Transient response from time = 1.7ms
TEXT 2872 208 Left 2 !.tran 0 2.7m 1.7m startup
TEXT 992 1152 Left 2 ;fsw = 500kHz
TEXT 648 -120 Left 4 ;LTC3581A Current-mode Synchronous Buck Controller Examples #5+6
TEXT 712 40 Left 3 ;The example power supply converts 12V to 1.5V @ 15A.\n \nThe changes relative to Example#4 are:\n * Changed the compensation network to allow gain at fsw, so that\n    the loop bandwidth can be increased\n * Example#5: move the low-frequency zero higher (~40kHz)\n * Example#6: move the low-frequency zero lower (~10kHz)
TEXT 864 -64 Left 3 ;6/15/2013 D. W. Hawkins (dwh@ovro.caltech.edu)
TEXT 2104 -128 Left 3 ;Parameters:
TEXT 2872 -24 Left 2 ;Use CTRL+right-mouse-click to (un)comment\none of these .tran commands
TEXT 992 1056 Left 2 ;tss = 1.6ms
TEXT 2560 1288 Left 2 ;TDK C5750X5R0J107M X5R 2mOhm
LINE Normal 3120 1120 3072 1200
LINE Normal 2608 1088 2608 1264
RECTANGLE Normal 3440 1648 560 -216
RECTANGLE Normal 2040 568 608 -176
RECTANGLE Normal 2816 568 2064 -176
RECTANGLE Normal 3384 568 2840 -176
